<!DOCTYPE html>
<html>

<head>
    <title>YAHTZEE!</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="css/yahtzee.css">
</head>  
<div class="text-center" id="yahtzee">YAHTZEE</div>
<body>

<div id="fireworks">    
    <div class="before"></div>
    <div class="after"></div>
</div>

<h1 class='text-center'>YAHTZEE!</h1>

<div class="container showHide">
    <div class="row text-center">        
        <div class="col"><div class="dice not-selected"></div></div>
        <div class="col"><div class="dice not-selected"></div></div>
        <div class="col"><div class="dice not-selected"></div></div>
        <div class="col"><div class="dice not-selected"></div></div>
        <div class="col"><div class="dice not-selected"></div></div>        
    </div>
</div>

<div class="text-center showHide"> 
    <button class="btn btn-lg btn-primary" id="roll-button">Roll Dice</button>
</div>


<div id="tabs">    
   
    <div class="container" id="tabs-1">

        <table class="table table-bordered table1">
            <tbody>
                <tr>
                    <th>Upper Section</th>
                    <th>How to Score</th>                    
                    <th class="width-15"><input class="input-width" placeholder="Player 1"></th>
                    <th class="width-15"><input class="input-width" placeholder="Player 2"></th>
                    <th class="width-15"><input class="input-width" placeholder="Player 3"></th>
                    <th class="width-15"><input class="input-width" placeholder="Player 4"></th>                    
                </tr>
                <tr> 
                    <th> 
                        <div>
                            <div>Aces <i class="fas fa-dice-one"></i></div>
                        </div>
                    </th>
                    <th class="how-to-score">Count and Add<br>Only Aces</th>
                    <td class="width-15"><input class="add-top1"></td>
                    <td class="width-15"><input class="add-top2"></td>
                    <td class="width-15"><input class="add-top3"></td>
                    <td class="width-15"><input class="add-top4"></td>
                </tr>
                <tr> 
                    <th> 
                        <div> 
                            <div>Twos <i class="fas fa-dice-two"></i></div>
                        </div>
                    </th>
                    <th class="how-to-score">Count and Add<br>Only Twoes</th>
                    <td><input class="add-top1"></td>
                    <td><input class="add-top2"></td>
                    <td><input class="add-top3"></td>
                    <td><input class="add-top4"></td>
                </tr>
                <tr> 
                    <th>
                        <div> 
                            <div>Threes <i class="fas fa-dice-three"></i></div>
                        </div>
                    </th>
                    <th class="how-to-score">Count and Add<br>Only Threes</th>
                    <td><input class="add-top1"></td>
                    <td><input class="add-top2"></td>
                    <td><input class="add-top3"></td>
                    <td><input class="add-top4"></td>
                </tr>
                <tr> 
                    <th>
                        <div> 
                            <div>Fours <i class="fas fa-dice-four"></i></div>
                        </div>
                    </th>
                    <th class="how-to-score">Count and Add<br>Only Fours</th>
                    <td><input class="add-top1"></td>
                    <td><input class="add-top2"></td>
                    <td><input class="add-top3"></td>
                    <td><input class="add-top4"></td>
                </tr>
                <tr> 
                    <th>
                        <div> 
                            <div>Fives <i class="fas fa-dice-five"></i></div>
                        </div>
                    </th>
                    <th class="how-to-score">Count and Add<br>Only Fives</th>
                    <td><input class="add-top1"></td>
                    <td><input class="add-top2"></td>
                    <td><input class="add-top3"></td>
                    <td><input class="add-top4"></td>
                </tr>
                <tr> 
                    <th>
                        <div> 
                            <div>Sixes <i class="fas fa-dice-six"></i></div>
                        </div>
                    </th>
                    <th class="how-to-score">Count and Add<br>Only Sixes</th>
                    <td><input class="add-top1"></td>
                    <td><input class="add-top2"></td>
                    <td><input class="add-top3"></td>
                    <td><input class="add-top4"></td>
                </tr>
                <tr>
                    <th> 
                    <div>
                        <div>Total Score</div>
                    </div>
                    </th>
                    <th class="how-to-score"></th>
                    <td><input class='score-top1' value='0'></td>
                    <td><input class='score-top2' value='0'></td>
                    <td><input class='score-top3' value='0'></td>
                    <td><input class='score-top4' value='0'></td>
                </tr>
                <tr>
                    <th> 
                        <div>
                            <div>Bonus</div>
                            <div class="alt">If total score is 63 or over.</div>
                        </div>
                    </th>
                    <th class="how-to-score">Score 35</th>
                    <td><input class='score-bonus1' value='0'></td>
                    <td><input class='score-bonus2' value='0'></td>
                    <td><input class='score-bonus3' value='0'></td>
                    <td><input class='score-bonus4' value='0'></td>

                </tr>
                <tr>
                    <th> 
                        <div>
                            <div>Total</div>
                            <div class="alt">Of Upper Section</div>
                        </div>
                    </th>
                    <th class="how-to-score"></th>
                    <td><input class='score-top-total1' value='0'></td>
                    <td><input class='score-top-total2' value='0'></td>
                    <td><input class='score-top-total3' value='0'></td>
                    <td><input class='score-top-total4' value='0'></td>
                </tr>
            </tbody>

            <tbody>
                <tr class="head">
                    <th colspan="6">Lower Section</th>
                </tr>
                <tr>
                    <th> 
                        <div>
                            <div>3 of a kind</div>
                        </div>
                    </th>
                    <th class="how-to-score">Total of all dice </th>
                    <td><input class="add-lower1"></td>
                    <td><input class="add-lower2"></td>
                    <td><input class="add-lower3"></td>
                    <td><input class="add-lower4"></td>
                </tr>
                <tr> 
                    <th> 
                        <div> 
                            <div>4 of a kind </div>
                        </div>
                    </th>
                    <th class="how-to-score">Total of all dice</th>
                    <td><input class="add-lower1"></td>
                    <td><input class="add-lower2"></td>
                    <td><input class="add-lower3"></td>
                    <td><input class="add-lower4"></td>
                </tr>
                <tr> 
                    <th>
                        <div> 
                            <div>Full House </div>
                        </div>
                    </th>
                    <th class="how-to-score">Score 25</th>
                    <td><input class="add-lower1"></td>
                    <td><input class="add-lower2"></td>
                    <td><input class="add-lower3"></td>
                    <td><input class="add-lower4"></td>
                </tr>
                <tr> 
                    <th>
                        <div> 
                            <div>Sm. Straight </div>
                            <div class="alt">Sequence of four</div>
                        </div>
                    </th>
                    <th class="how-to-score">Score 30</th>
                    <td><input class="add-lower1"></td>
                    <td><input class="add-lower2"></td>
                    <td><input class="add-lower3"></td>
                    <td><input class="add-lower4"></td>
                </tr>
                <tr> 
                    <th>
                        <div> 
                            <div>Lg. Straight </div>
                            <div class="alt">Sequence of five</div>
                        </div>
                    </th>
                    <th class="how-to-score">Score 40</th>
                    <td><input class="add-lower1"></td>
                    <td><input class="add-lower2"></td>
                    <td><input class="add-lower3"></td>
                    <td><input class="add-lower4"></td>
                </tr>
                <tr> 
                    <th>
                        <div> 
                            <div>YAHTZEE </div>
                            <div class="alt">Five of a kind</div>
                        </div>
                    </th>
                    <th class="how-to-score">Score 50</th>
                    <td><input class="add-lower1"></td>
                    <td><input class="add-lower2"></td>
                    <td><input class="add-lower3"></td>
                    <td><input class="add-lower4"></td>
                </tr>
                <tr> 
                    <th>
                        <div> 
                            <div>Chance </div>
                        </div>
                    </th>
                    <th class="how-to-score">Total of all dice</th>
                    <td><input class="add-lower1"></td>
                    <td><input class="add-lower2"></td>
                    <td><input class="add-lower3"></td>
                    <td><input class="add-lower4"></td>
                </tr>
                <tr> 
                    <th rowspan="2">
                        <div> 
                            <div>YAHTZEE Bonus</div>
                        </div>
                    </th>
                    <th class="how-to-score">&#x2714; for<br>each bonus</th>
                    <td><button class="btn btn-primary tally" id="tally1">YAHTZEE</button></td>
                    <td><button class="btn btn-primary tally" id="tally2">YAHTZEE</button></td>
                    <td><button class="btn btn-primary tally" id="tally3">YAHTZEE</button></td>
                    <td><button class="btn btn-primary tally" id="tally4">YAHTZEE</button></td>
                </tr>
                <tr>
                    <th class="how-to-score">Score 100<br>per &#x2714;</th>
                    <td>
                        <div>
                            <ol class="count1">&nbsp;</ol>  
                        </div>
                    </td>
                    <td>
                        <div>
                            <ol class="count2">&nbsp;</ol>  
                        </div>
                    </td>
                    <td>
                        <div>
                            <ol class="count3">&nbsp;</ol>
                        </div>
                    </td>
                    <td>
                        <div>
                            <ol class="count4">&nbsp;</ol>
                        </div>
                    </td>
                </tr>
                <tr>
                    <th> 
                        <div>
                            <div>Total</div>
                            <div class="alt">Of Lower Section</div>
                        </div>
                    </th>
                    <th class="how-to-score"></th>
                    <td><input class='score-lower-total1' value='0'></td>
                    <td><input class='score-lower-total2' value='0'></td>
                    <td><input class='score-lower-total3' value='0'></td>
                    <td><input class='score-lower-total4' value='0'></td>
                </tr>
                <tr>
                    <th> 
                        <div>
                            <div>Total</div>
                            <div class="alt">Of Upper Section</div>
                        </div>
                    </th>
                    <th class="how-to-score"></th>
                    <td><input class='score-top-total1' value='0'></td>
                    <td><input class='score-top-total2' value='0'></td>
                    <td><input class='score-top-total3' value='0'></td>
                    <td><input class='score-top-total4' value='0'></td>
                </tr>
                <tr>
                    <th> 
                        <div>
                            <div>Grand Total</div>
                        </div>
                    </th>
                    <th class="how-to-score"></th>
                    <td><input class='score-total1' value='0'></td>
                    <td><input class='score-total2' value='0'></td>
                    <td><input class='score-total3' value='0'></td>
                    <td><input class='score-total4' value='0'></td>
                </tr>
            </tbody>
        </table> 
    </div>
</div>

<script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous">        
</script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script>

function numberRolled() 
{
    var randomNumber = Math.floor(Math.random() * 6) + 1;
    return randomNumber;
}

let count = 0;
$('#roll-button').click(function() {
    // reset dice after rolling 3 times
    if (count > 2) {
        $('.dice').removeClass('selected');
        $('.dice').addClass('not-selected');
        $('.dice').text('');
        count = 0;
        return;
    }
    // check if dice are not-selected and roll
    $('.dice').each(function(i, obj) {
        if ($(this).hasClass('not-selected')) {
            $(this).text(numberRolled());
        }
    });
    count++;
    yahtzee();
});

// add fireworks if yahtzee
function yahtzee() 
{    
    $('#fireworks').addClass('pyro');
    $('body').addClass('black');
    $('input').addClass('black');
    $('#roll-button').hide();
    $('#yahtzee').show();
    window.scrollTo({ top: 0, behavior: 'smooth' });

    setTimeout(function() {
        $('#fireworks').removeClass('pyro');
        $('body').removeClass('black');
        $('input').removeClass('black');
        $('#roll-button').show();
        $('#yahtzee').hide();
    }, 3000);
}

// toggle dice selection and color
$('.dice').click(function() {
    $(this).toggleClass('selected not-selected');
});

// yahtzee tally marks
$(function() {
    $('.tally').on('click', function() {
        yahtzee();
        let findId = this.id;
        let idIndex = findId.slice(-1);
        let count = '.count' + idIndex;
        $(count).append('<li></li>');
    });
});

// get changed inputs column number, add to class names, calculate sums
$('input').change(function() {
    let findClass = this.className;
    let classIndex = findClass.slice(-1);
    let classes = ['.add-top', '.add-lower', '.score-top', '.score-bonus', '.count', '.score-top-total', '.score-lower-total', '.score-total'];

    for (let i = 0; i < classes.length; i++){
        classes[i] = classes[i] + classIndex;
    }

    let [topClass, lowerClass, scoreTop, scoreBonus, yahtzeeBonus, scoreTopTotal, scoreLower, scoreTotal] = classes;
    
    calcSum(topClass, lowerClass, scoreTop, scoreBonus, yahtzeeBonus, scoreTopTotal, scoreLower, scoreTotal);
});

function calcSum(topClass, lowerClass, scoreTop, scoreBonus, yahtzeeBonus, scoreTopTotal, scoreLower, scoreTotal)
{
    var sumTop = 0;
    $(topClass).each(function() {
        sumTop += +$(this).val();
    });

    var sumLower = 0;
    $(lowerClass).each(function() {
        sumLower += +$(this).val();
    });

    $(scoreTop).val(sumTop);
    if ($(scoreTop).val() > 62) {
        $(scoreBonus).val(35);
    }

    let top = $(scoreTop).val();
    let lower = $(scoreLower).val();
    let bonus35 = $(scoreBonus).val();
    let bonus100 = $(yahtzeeBonus).children('li').size();
    bonus100 = bonus100 * 100;

    let topTotal = parseInt(top) + parseInt(bonus35);
    let lowerTotal = sumLower + bonus100;
    let total = parseInt(topTotal) + parseInt(lowerTotal);
    $(scoreLower).val(lowerTotal);
    $(scoreTopTotal).val(topTotal);
    $(scoreTotal).val(total);
}

$(function() {
    $("#tabs").tabs();
});

$('.showDice').click(function() {
    $('.showHide').toggle();
    if ($('.showDice').text() === 'Show Dice') {
        $('.showDice').text('Hide Dice');
    } else {
        $('.showDice').text('Show Dice');
    }
});

</script>

</body>
</html>
